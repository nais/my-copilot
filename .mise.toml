# Root-level mise tasks for the monorepo
# These tasks orchestrate running tasks across all apps

[tasks.check]
description = "Run all checks across all apps"
run = '''
#!/usr/bin/env bash
set -e

echo "ğŸ” Running checks across all apps..."
echo ""

cd apps/mcp-onboarding && echo "ğŸ“¦ mcp-onboarding:" && mise check && echo ""
cd ../mcp-registry && echo "ğŸ“¦ mcp-registry:" && mise check && echo ""
cd ../my-copilot && echo "ğŸ“¦ my-copilot:" && mise check && echo ""

echo "âœ… All checks passed"
'''

[tasks.test]
description = "Run tests across all apps"
run = '''
#!/usr/bin/env bash
set -e

echo "ğŸ§ª Running tests across all apps..."
echo ""

cd apps/mcp-onboarding && echo "ğŸ“¦ mcp-onboarding:" && mise test && echo ""
cd ../mcp-registry && echo "ğŸ“¦ mcp-registry:" && mise test && echo ""
cd ../my-copilot && echo "ğŸ“¦ my-copilot:" && mise test && echo ""

echo "âœ… All tests passed"
'''

[tasks.build]
description = "Build all apps"
run = '''
#!/usr/bin/env bash
set -e

echo "ğŸ”¨ Building all apps..."
echo ""

cd apps/mcp-onboarding && echo "ğŸ“¦ mcp-onboarding:" && mise build && echo ""
cd ../mcp-registry && echo "ğŸ“¦ mcp-registry:" && mise build && echo ""
cd ../my-copilot && echo "ğŸ“¦ my-copilot:" && mise build && echo ""

echo "âœ… All apps built successfully"
'''

[tasks.all]
description = "Run all checks, tests, and builds across all apps"
depends = ["check", "test", "build"]
